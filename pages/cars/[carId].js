import Image from "next/image";
import React from "react";
import Rating from "@mui/material/Rating";
import { HeartIcon as HeartIconSolid } from "@heroicons/react/24/solid";
import { HeartIcon } from "@heroicons/react/24/outline";
import Car_Detail1 from "../../public/images/Car_Detail1.jpg";
import Car_Detail2 from "../../public/images/Car_Detail2.jpg";
import Car_Detail3 from "../../public/images/Car_Detail3.jpg";
import { useRouter } from "next/router";
import ProfileImage from "../../public/images/image-profile.png";
import ReviewImg from "../../public/images/review-img-2.png";
import Link from "next/link";
import CarCart from "../../components/CarCart";
import Head from "next/head";
import { useDispatch, useSelector } from "react-redux";
import { addLike } from "../../redux/addCars/carSlice";
import { toast } from "react-toastify";
import "react-toastify/dist/ReactToastify.css";

function CarId() {
  const { query } = useRouter();
  const dispatch = useDispatch();
  const { locale } = useRouter();

  const cars = useSelector((state) => state.carReducer.cars);

  const selectedItem = cars.find((item) => item.id == query.carId);
  const dispatchAddFavourite = () => {
    dispatch(addLike(selectedItem.id));
    if (selectedItem.is_like) {
      {
        locale === "en"
          ? toast.error("successfully deleted!")
          : toast.error("با موفقیت حذف شد!");
      }
    } else {
      {
        locale === "en"
          ? toast.success("successfully added!")
          : toast.success("با موفقیت اضافه شد!");
      }
    }
  };
  return (
    <>
      <Head>
        <title>Rent Car Website / {selectedItem?.name} </title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className="container mx-auto xl:max-w-screen-2xl ">
        <div className="flex md:flex-row flex-col items-start my-7 gap-x-8 m-4">
          <div className="md:w-1/2 w-full">
            <Image
              className="rounded-md"
              src={selectedItem?.img}
              alt="Car_Detail1 Image"
            />
            <div className="flex items-center justify-between mt-4">
              <Image
                className="rounded-md  object-cover w-[31%]"
                src={Car_Detail1}
                alt="Car_Detail1 Image"
              />
              <Image
                className="rounded-md  object-cover w-[31%]"
                src={Car_Detail2}
                alt="Car_Detail2 Image"
              />
              <Image
                className="rounded-md  object-cover w-[31%]"
                src={Car_Detail3}
                alt="Car_Detail3 Image"
              />
            </div>
          </div>
          <div className="bg-white dark:bg-[#243137] dark:text-white rounded-lg p-8 mt-5 md:mt-0 md:p-10 w-full md:w-1/2">
            {/* title */}
            <div className="flex items-start justify-between">
              <div className="flex flex-col gap-y-2">
                <h1 className="text-2xl md:text-3xl font-bold">
                  {selectedItem?.name}
                </h1>
                <div className="flex items-center gap-x-2">
                  <div>
                    <Rating value={parseInt(selectedItem?.rating)} readOnly />
                  </div>
                  <div>
                    <p className="text-sm text-[#596780] dark:text-white">
                      440+ Reviewer
                    </p>
                  </div>
                </div>
              </div>
              <div>
                {selectedItem?.is_like ? (
                  <HeartIconSolid
                    onClick={() => dispatchAddFavourite()}
                    className="scroll-effect h-7 w-7 text-red-500 cursor-pointer"
                  />
                ) : (
                  <HeartIcon
                    onClick={() => dispatchAddFavourite()}
                    className="scroll-effect h-7 w-7 text-[#90A3BF] cursor-pointer"
                  />
                )}
              </div>
            </div>
            {/* desc */}
            <div>
              <p
                className={`text-[#596780] leading-8 mt-5 dark:text-white ${
                  locale === "fa" && "text-right font-iransans"
                }`}
              >
                {locale === "en"
                  ? 'NISMO has become the embodiment of Nissans outstanding performance, inspired by the most unforgiving proving ground, the "race track"'
                  : "لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ، و با استفاده از طراحان گرافیک است، چاپگرها و متون بلکه روزنامه و مجله در ستون و سطرآنچنان که لازم است، و برای شرایط فعلی تکنولوژی مورد نیاز، و کاربردهای متنوع با هدف بهبود ابزارهای کاربردی می باشد"}
              </p>
            </div>
            {/* Detail */}
            <div className={`flex flex-wrap items-center gap-x-32 gap-y-4 mt-7 ${locale==="fa" && "font-iransans dir-rtl"}`}>
              <div className="flex items-center justify-between xl:w-[40%] w-[100%]">
                <p className="text-[#90A3BF] font-light">
                  {locale === "en" ? "Type Car" : "نوع خودرو"}
                </p>
                <p className="text-[#596780] dark:text-white">
                  {locale === "en"
                    ? selectedItem?.category
                    : selectedItem?.category_fa}
                </p>
              </div>
              <div className="flex items-center justify-between xl:w-[40%] w-[100%]">
                <p className="text-[#90A3BF] font-light">
                  {locale === "en" ? "Capacity" : "ظرفیت"}
                </p>
                <p className="text-[#596780] dark:text-white">
                  {locale === "en"
                    ? selectedItem?.passengers
                    : selectedItem?.passengers_fa}
                </p>
              </div>
              <div className="flex items-center justify-between xl:w-[40%] w-[100%]">
                <p className="text-[#90A3BF] font-light">
                  {locale === "en" ? "Steering" : "نوع دنده"}
                </p>
                <p className="text-[#596780] dark:text-white">
                  {locale === "en" ? selectedItem?.gear : selectedItem?.gear_fa}
                </p>
              </div>
              <div className="flex items-center justify-between xl:w-[40%] w-[100%]">
                <p className="text-[#90A3BF] font-light">
                  {locale === "en" ? "Gasoline" : "ظرفبت باک"}
                </p>
                <p className="text-[#596780] dark:text-white">
                  {locale === "en" ? selectedItem?.gas : selectedItem?.gas_fa}
                </p>
              </div>
            </div>
            {/* price */}
            <div className="flex items-center justify-between mt-10">
              <div className="flex flex-col">
                <p className="font-bold md:text-3xl text-2xl">
                  ${selectedItem?.final_price} /{" "}
                  <span className={`text-sm text-[#90A3BF] ${locale==="fa" && "font-iransans"}`}>
                    {locale === "en" ? "day" : "روز"}
                  </span>
                </p>
                {selectedItem?.off_price && (
                  <span className="text-[#90A3BF] line-through	">
                    ${selectedItem?.off_price}
                  </span>
                )}
              </div>
              <div>
                {selectedItem && (
                  <Link
                    href={{
                      pathname: "/checkout",
                      query: { id: selectedItem.id },
                    }}
                  >
                    <button className={`md:py-4 md:px-7 px-4 py-2 bg-[#3563E9] rounded-md text-white scroll-effect ${locale==="fa" && "font-iransans"}`}>
                      {locale === "en" ? "Rental Now" : "هم اکنون رزرو کنید"}
                    </button>
                  </Link>
                )}
              </div>
            </div>
          </div>
        </div>
        <section className="px-5">
          <div className={`bg-white dark:bg-[#243137] dark:text-white p-8 rounded-lg ${locale==="fa" && "font-iransans dir-rtl"}`}>
            <div className="flex items-center gap-x-3 mb-10">
              <p className="text-xl font-bold">
                {locale === "en" ? "Reviews" : "نظرات"}
              </p>
              <span className="bg-[#3563E9] text-white py-1 px-5 rounded-lg">
                13
              </span>
            </div>
            {/* review item */}
            <div className="flex items-start gap-x-7 mb-8">
              <div className="hidden md:block">
                <Image
                  className="scroll-effect"
                  src={ProfileImage}
                  alt="Logo Image"
                  width={100}
                  height={100}
                />
              </div>
              <div className="grow">
                <div className="flex items-center justify-between mb-3">
                  <div>
                    <p className="md:text-xl text-lg">Alex Stanton</p>
                    <p className="text-[#90A3BF] text-sm">
                      {locale === "en"
                        ? "CEO at Bukalapak"
                        : " Bukalapak در شرکت CEO"}
                    </p>
                  </div>
                  <div className="flex flex-col items-end justify-end">
                    <p>21 July 2022</p>
                    <Rating value={4.4} readOnly />
                  </div>
                </div>

                <p className={`font-light ${locale==="fa" && "text-right"}`}>
                  {locale === "en"
                    ? "We are very happy with the service from this sebsite. Morent has a low price and also a large variety of cars with good and comfortable facilities. In addition, the service provided by the officers is also very friendly and very polite."
                    : "لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ، و با استفاده از طراحان گرافیک است، چاپگرها و متون بلکه روزنامه و مجله در ستون و سطرآنچنان که لازم است، و برای شرایط فعلی تکنولوژی مورد نیاز، و کاربردهای متنوع با هدف بهبود ابزارهای کاربردی می باشد"}
                </p>
              </div>
            </div>
            {/* review item */}
            <div className="flex items-start gap-x-7 mb-8">
              <div className="hidden md:block">
                <Image
                  className="scroll-effect"
                  src={ReviewImg}
                  alt="Logo Image"
                  width={100}
                  height={100}
                />
              </div>
              <div className="grow">
                <div className="flex items-center justify-between mb-3">
                  <div>
                    <p className="md:text-xl text-lg">Skylar Dias</p>
                    <p className="text-[#90A3BF] text-sm">
                      {locale === "en"
                        ? "CEO at Amazon"
                        : " Amaozn در شرکت CEO"}
                    </p>
                  </div>
                  <div className="flex flex-col items-end justify-end">
                    <p>20 July 2022</p>
                    <Rating value={5} readOnly />
                  </div>
                </div>
                <p className={`font-light ${locale==="fa" && "text-right"}`}>
                  {locale === "en"
                    ? "We are greatly helped by the services of the MORENTApplication. Morent has low prices and also a wide variety ofcars with good and comfortable facilities. In addition, theservice provided by the officers is also very friendly and very polite."
                    : "لورم ایپسوم متن ساختگی با تولید سادگی نامفهوم از صنعت چاپ، و با استفاده از طراحان گرافیک است، چاپگرها و متون بلکه روزنامه و مجله در ستون و سطرآنچنان که لازم است، و برای شرایط فعلی تکنولوژی مورد نیاز، و کاربردهای متنوع با هدف بهبود ابزارهای کاربردی می باشد"}
                </p>
              </div>
            </div>
          </div>
        </section>
        <section className="md:px-5 px-2">
          <>
            <div className="flex items-center justify-between md:px-0 px-2 mt-14">
              <p className="text-[#90A3BF]">Recomendation Car</p>
              <Link href="/cars" className="text-[#3563E9]">
                View All
              </Link>
            </div>
            <div className="grid gap-8 grid-cols-1 md:grid-cols-2 lg:grid-cols-4 pt-4">
              <CarCart sliceNubmer={4} />
            </div>
          </>
        </section>
      </div>
    </>
  );
}

export default CarId;
